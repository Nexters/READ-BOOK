# 타입과 추상화

## 추상화

어떤 양상, 세부 사항, 구조를 명확히 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춰 복잡도를 극복하는 방법.

복잡성을 다루기 위해 추상화는 두 차원에서 이루어진다.

1. 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만든다.
2. 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순하게 만든다.

모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이다. 앨리스에는 수많은 등장인물이 나오지만 트럼프 카드와 토끼라는 두 개의 그룹으로 나눌 수 있는 것과 같다.

## 개념(concept)

- 공통점으로 객체를 묶는 그릇
    - ex. 트럼프 카드, 토끼
- 개념을 이용하면 객체를 여러 그룹으로 분류(classification)할 수 있다.
    - ex. 트럼프 카드와 토끼라는 개념에 따라 각 객체를 그룹에 포함되도록 분류함
- 객체가 어떤 개념 그룹의 일원이 되면 인스턴스(instance)라고 한다.
    - ex. 하트 여왕, 하얀 토끼

## 개념의 세 가지 관점

### 심볼(symbol)

개념을 가리키는 간략한 이름이나 명칭. 앨리스에서 개념을 지칭하는 데 사용되는 트럼프 카드가 해당된다.

### 내연(intension)

개념의 의미. 이 의미를 이용해 객체가 개념에 속하는지 확인할 수 있다. 몸이 납작하고 두 손과 두 발이 네모난 몸에 달려있는지 여부로 트럼프 카드인지 확인한다.

### 외연(extension)

개념에 속하는 모든 객체의 집합(set). 정원사, 병사, 신하, 하트 여왕 등은 모두 트럼프 카드의 외연을 구성하는 객체 집합이다.

## 객체를 분류하기 위한 틀

분류는 객체에 특정한 개념을 적용하는 작업이다. 객체에 특정 개념을 적용한다는 것은 그 객체를 특정한 집합의 멤버로 분류하는 것이다.

분류는 객체 지향의 가장 중요한 개념 중 하나다. 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다. 제대로 분류하지 못하면 유지보수가 어렵고 큰 그림을 파악하기 힘들다.

```text
1. 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만든다.
2. 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순하게 만든다.
```

왕과 병사를 트럼프 카드로 묶은 것 즉, 개념으로 각 객체를 묶은 것은 객체 간의 차이점을 무시하고 공통점을 취한 것이다. 즉, 개념은 추상화의 첫번째 차원을 적용한 결과다.

객체의 공통점 중에서도 트럼프 카드가 납작하고 손 발이 달렸다는 특징외의 다른 사항은 전적으로 무시하고 있다. 추상화의 두 번째 차원을 적용한 것이다.

## 타입

- 개념과 같은 의미
- 공통점으로 객체를 묶기 위한 틀
- 데이터가 어떻게 사용되느냐에 관한 것
    - 연산자의 종류가 아니라 어떻게 적용할 수 있는지가 타입을 결정함
    - ex. 덧셈, 뺄셈을 할 수 있으면 숫자형 데이터
- 타입에 속한 데이터가 메모리에 어떻게 표현하는지는 감춰짐
    - 메모리에 숫자가 어떻게 저장되는지 몰라도 사용할 수 있음
  
### 데이터 타입

- 메모리 안에 저장된 데이터의 종류를 분류할 때 사용하는 메모리 집합에 대한 메타데이터
- 어떤 연산이 데이터에 수행될 수 있는지 결정함

### 객체와 타입

- 객체의 행동이 객체의 타입을 결정함
  - 어떤 데이터를 가지고 있는지는 타입 결정에 어떠한 영향도 없음
- 객체의 내부 표현은 외부로부터 감춰짐

### 다형성

- 동일한 요청에 달느 방식으로 응답할 수 있는 능력
- 같은 타입의 객체는 행동(=책임)만 같으면 다른 데이터(다른 표현 방식)을 가질 수 있음
- 같은 메시지를 다른 방식으로 처리하기 위해서는 동일한 메시지를 받아야 하므로 다형적인 객체는 동일한 타입에 속함

### 캡슐화

- 데이터 표현 방식과 무관하게 행동만 고려하기 위해 외부에 데이터를 감춤

### 책임 주도 설계

- 행동으로 객체를 분류하려면 내부에서 관리하는 데이터가 아니라 외부에 제공할 행동을 먼저 생각해야 함
- 책임을 먼저 결정하고 수행에 필요한 데이터는 캡슐화 함

## 타입의 계층

앨리스의 트럼프는 진짜 트럼프 카드가 아니다. 납작 엎드리고 뒤집을 수 있는 트럼프의 행동에 걸을 수 있다는 인간의 행동이 추가된 트럼프 인간이다. 트럼프의 일종이지만 좀 더 특화된 것이다. 따라서 트럼프 인간 타입은 트럼프 타입의 부분 집합이다.

### 일반화와 특수화의 관계

트럼프는 트럼프 인간보다 일반적인 개념이다. `일반적 = 포괄적` 이기 때문이 트럼프는 트럼프 인간 객체를 포함한다.

- 객체의 상태를 표현하는 데이터가 아니라 **행동**이 일반화, 특수화 관계를 결정함
- 일반적인 타입은 특수한 타입보다 더 적은 수의 행동을 수행함
- 특수한 타입은 일반적인 타입보다 많은 행동을 가짐
  - 특수한 타입은 일반적인 타입이 가진 모든 타입을 포함하면서 특수한 행동이 추가된 타입
  
### 슈퍼타입과 서브타입

- 슈퍼타입
  - 좀 더 일반적인 타입
- 서브타입
  - 좀 더 특수한 타입
  - 슈퍼타입의 행위를 호환하므로 슈퍼타입을 대체 가능함
  
## 정적 모델

앨리스는 음식을 먹고 키가 작아지거나 커져도 결국 앨리스다. 타입은 시간에 따라 동적으로 변하는 상태를 정적으로 다루게 해준다.

- 앨리스 타입
  - 키
  - 버섯을 먹다
  - 음료를 마시다
  - 부채질 하다

언제 100cm였고, 300cm였는지 구분하던 것에서 이제 시간이라는 요소를 제거해 정적인 모습으로 앨리스를 볼 수 있다.

### 타입은 추상화다

타입을 이용하면 객체의 동적인 특성을 추상화 즉, 단순화할 수 있다.

### 동적 모델과 정적 모델

- 동적 모델
  - 특정 시점에 객체가 가진 상태와 행동을 포착함
- 정적 모델(타입 모델)
  - 객체의 상태와 행동을 시간에 독립적으로 표현함
  
클래스를 작성할 때는 정적인 관점에서 접근하지만 실제 애플리케이션이 실행될 때 상태를 추적하고 디버깅하는 것은 동적인 관점이다. 이 두 관점을 모두 다룰 수 있어야 한다.

### 클래스

- 정적인 모델을 구현할 때 사용
- 타입을 구현할 때 이용하는 가장 보편적인 방법

클래스는 타입이 아니다.

- 타입
  - 객체를 분류하기 위해 사용하는 개념
- 클래스
  - 타입을 구현할 수 있는 매커니즘
  
## 정리

- 객체를 분류하는 기준은 타입
- 타입을 분류하는 기준은 객체의 행동
- 타입을 구현하는 방법은 클래스
