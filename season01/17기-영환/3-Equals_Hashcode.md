## equlas, hashcode 메소드에 대해서

> '자바의 신 - 12장 모든 클래스의 부모 클래스는 Object에요' 를 보고 정리한 글 입니다.

### 왜 알아보아야 하나

자바는 클래스를 통해서 객체를 생성하게 된다.

객체는 코드를 짜는 개발자든, 서비스나 프로그램을 사용하는 사용자든 얼마든 생성할 수 있다.

자바는 생성되는 객체를 관리하게 되고, 관리를 시작하는 순간 비용이 발생하기 시작한다.

메모리에 관리되지 않는 객체가 쌓일 수록, GC 는 일을 많이 하게 된다.

GC 가 일을 많이 할 수록, ‘stop the world’ 가 길어지며, 성능과 비용에 문제가 발생한다.

따라서, 객체의 관리라는 측면에서 개발자가 객체를 컨트롤 할 수 있는 함수들이 필요하고, ‘equals’, ‘hashcode’ 같은 메소드를 적절히 활용하여 객체 라이프 사이클을 관리해야 한다.



### 뭐하는 친구들이냐

동일성과 동등성에 대한 이해가 필요하다.

어떤 ‘두개의 객체가 같다’ 라는 말에 대해서 생각해보자.

두 객체가 리턴하는 값이 같을 수도 있고, 두 객체의 주소값이 같을 수도 있다.

만약, 두 객체의 값이 같고 주소값이 다르다면 동등하다 라고 표현할 수 있다.

예를 들어, 두 사람의 나이가 같다면 두 사람은 동등한 나이대에 있다고 볼 수 있다.

두 사람의 나이만 따로 보면, 동일하다고 볼 수 있다.

어떤 특정한 값이 같을 때, 우리는 동일하다고 본다.

만약, 두 객체의 주소값이 같다면 동일한 객체라고 표현할 수 있다.

두 객체의 인스턴스 변수들의 값이 같다면, 해당 객체는 동일하게 처리되어야 한다.

두 객체의 인스턴스 변수들의 값이 하나라도 다르다면, 두 객체는 다른 주소값을 가져야 한다.

‘equals’ 는 인스턴스 변수의 값을 비교한다.

‘hashcode’ 는 인스턴스의 주소값을 리턴한다.


### 왜 필요하냐

```
‘equals’ 매소드로 객체가 서로 같다(동등하다) 라고 이야기 할 수 있지만, 그 값이 같다고 해서 그 객체의 주소 값이 같다(동일하다) 라고 할 수는 없다.
```

‘Object’ 클래스에서 기본적으로 제공하는 ‘equals’ 메소드는 ‘hashcode’ 의 값을 리턴한다.
‘hashcode’ 는 주소값을 리턴한다.

아래 코드를 보자

```
// ‘equals’ 와 ‘hashcode’를 Overriding 하지 않은 ‘SameClass’ 클래스

SameClass same1 = new SameClass(“박영환”);
SameClass same2 = new SameClass(“박영환”);

System.out.println(same1.equals(same2));
```

두 객체는 같은 값을 가지므로 동등하지만, 주소값은 다르기 때문에 값은 false 로 나온다.

두 객체는 휴먼의 세계에서 같다고 볼 수 있지만, 자바의 세계에서는 두개의 다른 객체로 존재하게 된다.

휴먼의 세계나 자바의 세계에서 대부분의 경우, 위와 같은 경우는 모두 같다 라고 본다.


### 어떻게 해야되냐
‘equals’ 메소드를 수정해야 할 때, 무조건 ‘hashcode’ 메소드를 수정해야 한다.

클래스가 필요로 할 때만, 수정을 가하면 되고 기능 위주의 클래스라서 필요하지 않다면, 신경쓰지 않아도 된다.